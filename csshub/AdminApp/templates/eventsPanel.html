{% load static %}
{% include 'partials/head.html'%}
  <body>
    <div class="container-fluid px-0">
      <nav class="navbar bg-black">
        <div class="container-fluid">
          <div class="d-flex align-items-center">
            <div>
              <a class="me-3 navbar-brand" href="#">
                <img class="me-0" src="{%static '/assets/images/logo-css-removebg-preview.png' %}" alt="Logo" width="50" height="50">
              </a>
            </div>
            <div class="justify-content-center align-items-center fs-5 ">
              <a class="title text-white fs-5 mb-0 navbar-brand" href="">Computer Student Society</a>
            </div>
          </div>
          <div>
            <a class="text-decoration-none text-white me-5 fs-6" href="./login.html">
              LogIn as Member 
            </a>
          </div>
        </div>
      </nav>
      <main>
        <div class="container-fluid">
          <div class="row">

            <!-- EDIT Modal -->
            <div class="modal fade" id="editform" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content bg-dark text-light">
                  <div class="modal-header ">
                    <div class="d-flex align-items-center">
                      <div>
                        <a class="me-3 navbar-brand" href="#">
                          <img class="me-0" src="{%static '/assets/images/logo-css-removebg-preview.png' %}" alt="Logo" width="50" height="50">
                        </a>
                      </div>
                      <div class="justify-content-center align-items-center fs-5 ">
                        <a class="title text-light fs-5 mb-0 navbar-brand" href="">Computer Student Society</a>
                      </div>
                    </div>
                    <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body text-dark d-flex flex-column">
                    <form id="edit-form-id" action="/api/edit-event/" method="post" enctype="multipart/form-data" novalidate="">
                      {% csrf_token %}
                       <!-- Hidden input for event ID -->
                      <input name="id" type="hidden" id="Eventid" value="{{ event.id }}">
                      <div class="form-floating mb-3">
                        <input name="name" type="text" class="form-control" id="EventNameInput" placeholder="Name">
                        <label for="EventNameInput">Event Name</label>
                      </div>
                      <div class="mb-3">
                        <textarea class="form-control" id="EventDiscription" rows="5" placeholder="Description" name="description"></textarea>
                      </div>
                      <div class="input-group mb-3">
                        <input type="file" class="form-control" id="EventPictureInput" name="image" accept="image/*">
                        <label class="input-group-text" for="EventPictureInput" >Upload</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="date" name="date" class="form-control" id="EventDate" placeholder="Event Location">
                        <label for="EventLocationInput">Event Date</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="location" class="form-control" id="EventLocationInput" placeholder="Event Location">
                        <label for="EventLocationInput">Event Location</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="number" name="fee" class="form-control" id="EventFeeInput" placeholder="Event Fee">
                        <label for="EventFeeInput">Event Fee</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="number" name="discount" class="form-control" id="EventDiscountInput" placeholder="Event Discount">
                        <label for="EventDiscountInput">Event Discount</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="creator" class="form-control" id="EventCreator" placeholder="Student Id Number">
                        <label for="EventCreator">Event Creator</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="status" class="form-control" id="EventStatus" placeholder="Event Status">
                        <label for="EventStatus">Event Status</label>
                      </div>
                      <div class="modal-footer">
                        <button type="submit" id="save-btn" class="btn btn-success" data-bs-dismiss="modal">SAVE</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">DELETE</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!-- CREATE Modal -->
            <div class="modal fade" id="createfrom" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content bg-dark text-light">
                  <div class="modal-header ">
                    <div class="d-flex align-items-center">
                      <div>
                        <a class="me-3 navbar-brand" href="#">
                          <img class="me-0" src="{%static '/assets/images/logo-css-removebg-preview.png'%}" alt="Logo" width="50" height="50">
                        </a>
                      </div>
                      <div class="justify-content-center align-items-center fs-5 ">
                        <a class="title text-light fs-5 mb-0 navbar-brand" href="">Computer Student Society</a>
                      </div>
                    </div>
                    <button type="button" class="btn-close bg-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body text-dark d-flex flex-column">
                    <form id="create-form-id" action="/api/create-event/" method="post" enctype="multipart/form-data" novalidate="">
                      {% csrf_token %}
                      <div class="form-floating mb-3">
                        <input name="name" type="text" class="form-control" id="EventNameInput" placeholder="Name">
                        <label for="EventNameInput">Event Name</label>
                      </div>
                      <div class="mb-3">
                        <textarea class="form-control" id="EventDiscription" rows="5" placeholder="Description" name="description"></textarea>
                      </div>
                      <div class="input-group mb-3">
                        <input type="file" class="form-control" id="EventPictureInput" name="image" accept="image/*">
                        <label class="input-group-text" for="EventPictureInput" >Upload</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="date" name="date" class="form-control" id="EventDate" placeholder="Event Location">
                        <label for="EventLocationInput">Event Date</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="location" class="form-control" id="EventLocationInput" placeholder="Event Location">
                        <label for="EventLocationInput">Event Location</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="number" name="fee" class="form-control" id="EventFeeInput" placeholder="Event Fee">
                        <label for="EventFeeInput">Event Fee</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="number" name="discount" class="form-control" id="EventDiscountInput" placeholder="Event Discount">
                        <label for="EventDiscountInput">Event Discount</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="creator" class="form-control" id="EventCreator" placeholder="Student Id Number">
                        <label for="EventCreator">Event Creator</label>
                      </div>
                      <div class="form-floating mb-3">
                        <input type="text" name="status" class="form-control" id="EventStatus" placeholder="Event Status">
                        <label for="EventStatus">Event Status</label>
                      </div>
                      <div class="modal-footer">
                        <button type="submit" id="save-btn" class="btn btn-success" data-bs-dismiss="modal">SAVE</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">CANCEL</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!---->

            <div class="p-0 col bg-light text-center">
                <div class="px-4 my-5">
                  <p class="h3">ADMIN DASHBOARD</p>
                  <!-- <p class="h3">{{events}}</p> -->
                </div>
                <div class="line bg-black"></div>
                <div class="p-4">
                  <div class="d-flex justify-content-center">
                    <ul class="text-start">
                      <li class="py-4">
                        <a class="fs-4 text-dark" href="/control/user-panel">Users</a>
                      </li>
                      <li class="py-4">
                        <a class="fs-4 text-dark" href="/control/events-dashboard">Events</a>
                      </li>
                      <li class="py-4">
                        <a class="fs-4 text-dark" href="/control/user-request">Request</a>
                      </li>
                    </ul>
                  </div>
                </div>
            </div>
            <div class="col-7 px-0">
              <section class="container d-flex row-gap-2 flex-column box vh-100">
                {% if events %}
                  {% for entry in events %}
                  <div class="post-entry d-flex bg-light flex-column rounded p-4">
                    <div class="post-desc">
                      <div class="d-flex">
                          <div>
                              <h5>
                                {{entry.name}}
                              </h5>
                              <p class="fs-6 mt-4">
                                  {{entry.description}}
                              </p>
                          </div>
                          <div>
                              <p class="rounded py-2 px-5 bg-success text-white h6 ">{{entry.status}}</p> 
                          </div>
                      </div>
                    </div>
                    <div class="post-img mt-3">
                      {% if entry.image %}
                        <img class="" src="{{ entry.image.url}}" width="100%" height="500px" alt="">
                    {% else %}
                        <p>No image available.</p>
                    {% endif %}
                    </div>
                    <div class="post-btn d-flex flex-row-reverse mt-4 gap-2">
                      <button type="button" event-id="{{entry.id}}" id="edit-btn"
                      class="btn btn-warning text-light py-3 px-5"
                      data-bs-target="#editform" data-bs-toggle="modal" >EDIT EVENT</button>
                      
                      <button type="button" event-id="{{entry.id}}" id="delete-btn"
                      class="btn btn-danger text-light py-3 px-5 ">DELETE EVENT</button>
                    </div>                
                  </div>  
                  {% endfor %}
                {% else  %}
                    <p class="text-white text-center fs-3 mt-5">No Events Available</p>
                {% endif %}

              </section>
            </div>
            <div class="bg-light col text-center">
                <div class="mt-4">
                    <button type="button" id="create-btn" data-bs-toggle="modal" data-bs-target="#createfrom"
                     class="btn btn-warning px-4 py-3 fs-5">CREATE EVENT</button>
                </div>
            </div> 
          </div>
        </div>
      </main>
        
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- Your external JS file -->
    <script type="text/javascript" data-events = "{{events}}" src="{% static 'admin.js' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>